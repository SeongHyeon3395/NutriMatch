# NutriMatch - ë§ì¶¤í˜• ì‹ë‹¨ ê´€ë¦¬ ì•±

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

NutriMatchëŠ” ì‚¬ìš©ìì˜ ê±´ê°• ëª©í‘œ, ì‹ìŠµê´€, ì•Œë ˆë¥´ê¸° ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìŒì‹ì„ ë¶„ì„í•˜ê³  ë§ì¶¤í˜• í”¼ë“œë°±ì„ ì œê³µí•˜ëŠ” AI ê¸°ë°˜ ì‹ë‹¨ ê´€ë¦¬ ì•±ì…ë‹ˆë‹¤.

### í•µì‹¬ ì°¨ë³„í™” ê¸°ëŠ¥ (The "Wow" Factor)

ğŸš¦ **ì‹ í˜¸ë“± ì í•©ë„ ì‹œìŠ¤í…œ**
- ìŒì‹ ì‚¬ì§„ ì´¬ì˜ ì¦‰ì‹œ 5ë‹¨ê³„ ë“±ê¸‰ (ë§¤ìš° ì¢‹ìŒ/ì¢‹ìŒ/ë³´í†µ/ë‚˜ì¨/ë§¤ìš° ë‚˜ì¨)ìœ¼ë¡œ ì í•©ë„ í‘œì‹œ
- ì‚¬ìš©ì í”„ë¡œí•„(ëª©í‘œ, ì‹ìŠµê´€, ì•Œë ˆë¥´ê¸°)ê³¼ ìë™ ëŒ€ì¡°
- ìƒ‰ìƒ ì½”ë“œë¡œ ì§ê´€ì  í”¼ë“œë°± (ì´ˆë¡/ì—°ë‘/ë…¸ë‘/ì£¼í™©/ë¹¨ê°•)

âš ï¸ **ì•Œë ˆë¥´ê¸° & ê¸°í”¼ ì‹ì¬ë£Œ í•„í„°**
- 20ëŒ€ ì•Œë ˆë¥´ê¸° ì²´í¬ë¦¬ìŠ¤íŠ¸ + ì§ì ‘ ì…ë ¥ ê¸°ëŠ¥
- ê°œì¸ ì·¨í–¥ ë°˜ì˜ (ì˜ˆ: "ì˜¤ì´ ì‹«ì–´í•¨", "ê³ ìˆ˜ ì œì™¸")
- ì‹¤ì‹œê°„ ê²½ê³  í‘œì‹œ

ğŸ¥— **ëŒ€ì²´ ìŒì‹ ì¶”ì²œ**
- ëª©í‘œì— ë§ì§€ ì•ŠëŠ” ìŒì‹ì— ëŒ€í•œ ê±´ê°•í•œ ëŒ€ì•ˆ ì œì‹œ
- AI ê¸°ë°˜ ë§ì¶¤í˜• ì„­ì·¨ íŒ ì œê³µ

---

## ğŸ“± ì•± êµ¬ì¡° (Sitemap)

### 1. ì˜¨ë³´ë”© (ì²« ì‹¤í–‰ ì‹œ 1íšŒ)
- **Step 1**: ì´ë¦„ ì…ë ¥
- **Step 2**: ëª©í‘œ ì„¤ì • (ë‹¤ì´ì–´íŠ¸/ë²Œí¬ì—…/ìœ ì§€/ì €ì—¼ì‹)
- **Step 3**: ì‹ìŠµê´€ (ì¼ë°˜/ë¹„ê±´/ë² ì§€í…Œë¦¬ì–¸/í˜ìŠ¤ì½”/í‚¤í† /ì €íƒ„ê³ ì§€)
- **Step 4**: ì•Œë ˆë¥´ê¸° (20ê°œ ì²´í¬ë¦¬ìŠ¤íŠ¸ + ì§ì ‘ ì…ë ¥)
- **Step 5**: ê¸°í”¼ ì‹ì¬ë£Œ (ì§ì ‘ ì…ë ¥)

### 2. ğŸ  í™ˆ (ë©”ì¸ ëŒ€ì‹œë³´ë“œ)
- **ì˜¤ëŠ˜ì˜ ì‹ë‹¨ ì ìˆ˜**: 0-100ì  ì›í˜• ê·¸ë˜í”„
- **ì´ˆëŒ€í˜• ì¹´ë©”ë¼ ë²„íŠ¼**: ì¦‰ì‹œ ì´¬ì˜ ë˜ëŠ” ê°¤ëŸ¬ë¦¬ ì„ íƒ
- **ë‚¨ì€ ì˜ì–‘ì†Œ**: ëª©í‘œ ëŒ€ë¹„ ë¶€ì¡±/ì¶©ë¶„ ì˜ì–‘ì†Œ í‘œì‹œ
- **ê°œì¸í™” ì¸ì‚¬ë§**: ì‹œê°„ëŒ€ë³„ ë©”ì‹œì§€

### 3. ğŸ“… ì‹ë‹¨ ê¸°ë¡ (Diary)
- ì•„ì¹¨/ì ì‹¬/ì €ë…/ê°„ì‹ ìë™ ë¶„ë¥˜
- ì‚¬ì§„ + ì í•©ë„ ë“±ê¸‰ + íƒ€ì„ìŠ¤íƒ¬í”„
- ì¼ë³„/ì£¼ë³„ í†µê³„ (ì˜ˆì •)
- AI ì½”ì¹­ ë©”ì‹œì§€ (ì˜ˆì •)

### 4. ğŸ‘¤ ë§ˆì´í˜ì´ì§€ (Profile)
- í”„ë¡œí•„ ì •ë³´ í™•ì¸ (ëª©í‘œ, ì‹ìŠµê´€, ì•Œë ˆë¥´ê¸°)
- í”„ë¡œí•„ ìˆ˜ì • (ì˜ˆì •)
- ì‹ ì²´ ë³€í™” ê·¸ë˜í”„ (ì˜ˆì •)
- ë¡œê·¸ì•„ì›ƒ

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### Frontend
- **React Native 0.82.1** + TypeScript
- **React Navigation**: ì˜¨ë³´ë”© â†’ íƒ­ ë„¤ë¹„ê²Œì´ì…˜
- **Zustand**: ì „ì—­ ìƒíƒœ ê´€ë¦¬ (í”„ë¡œí•„, ì‹ë‹¨ ë¡œê·¸)
- **AsyncStorage**: ë¡œì»¬ ë°ì´í„° ì €ì¥
- **react-native-image-crop-picker**: ì¹´ë©”ë¼/ê°¤ëŸ¬ë¦¬ + í¬ë¡­

### Backend
- **Supabase Edge Functions** (Deno)
- **Google Gemini 1.5 Flash/Pro**: Vision AI for ìŒì‹ ì‹ë³„
- **FormData API**: ì´ë¯¸ì§€ ì—…ë¡œë“œ

### ì£¼ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬
```json
{
  "@react-navigation/native": "^6.x",
  "@react-navigation/bottom-tabs": "^6.x",
  "@react-navigation/native-stack": "^6.x",
  "zustand": "^4.x",
  "@react-native-async-storage/async-storage": "^1.x",
  "react-native-image-crop-picker": "latest",
  "react-native-safe-area-context": "^4.x",
  "react-native-screens": "^3.x"
}
```

---

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
Front/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ navigation/
â”‚   â”‚   â”œâ”€â”€ RootNavigator.tsx      # ë©”ì¸ ë„¤ë¹„ê²Œì´ì…˜ (Onboarding â†” Main Tabs)
â”‚   â”‚   â””â”€â”€ types.ts                # ë„¤ë¹„ê²Œì´ì…˜ íƒ€ì… ì •ì˜
â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”œâ”€â”€ onboarding/
â”‚   â”‚   â”‚   â””â”€â”€ OnboardingScreen.tsx  # 5ë‹¨ê³„ ì„¤ë¬¸ì¡°ì‚¬
â”‚   â”‚   â”œâ”€â”€ home/
â”‚   â”‚   â”‚   â”œâ”€â”€ HomeScreen.tsx        # ëŒ€ì‹œë³´ë“œ + ì¹´ë©”ë¼ ë²„íŠ¼
â”‚   â”‚   â”‚   â””â”€â”€ FoodResultScreen.tsx  # ë¶„ì„ ê²°ê³¼ (ì‹ í˜¸ë“± ì‹œìŠ¤í…œ)
â”‚   â”‚   â”œâ”€â”€ diary/
â”‚   â”‚   â”‚   â””â”€â”€ DiaryScreen.tsx       # ì‹ë‹¨ ê¸°ë¡ ëª©ë¡
â”‚   â”‚   â””â”€â”€ profile/
â”‚   â”‚       â””â”€â”€ ProfileScreen.tsx     # ë§ˆì´í˜ì´ì§€
â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â””â”€â”€ userStore.ts              # Zustand ì „ì—­ ìƒíƒœ
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ user.ts                   # íƒ€ì… ì •ì˜ (UserProfile, FoodAnalysis ë“±)
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ api.ts                    # Supabase API í†µì‹ 
â”‚   â””â”€â”€ config.ts                     # í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
â”œâ”€â”€ supabase/
â”‚   â””â”€â”€ functions/
â”‚       â””â”€â”€ analyze-food-image/
â”‚           â””â”€â”€ index.ts              # v4-userAnalysis (ì‚¬ìš©ì ë§ì¶¤ ë¶„ì„)
â”œâ”€â”€ App.tsx                           # ë©”ì¸ ì—”íŠ¸ë¦¬
â””â”€â”€ .env                              # í™˜ê²½ ë³€ìˆ˜
```

---

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### 1. í™˜ê²½ ì„¤ì •
```bash
# .env íŒŒì¼ ìƒì„±
SUPABASE_URL=https://wrgeaabfsbjdgtjcwevv.supabase.co
SUPABASE_ANON_KEY=your_anon_key
GEMINI_API_KEY=your_gemini_key
```

### 2. íŒ¨í‚¤ì§€ ì„¤ì¹˜
```bash
npm install
```

### 3. Android ë¹Œë“œ ë° ì‹¤í–‰
```bash
# Gradle ìºì‹œ ì •ë¦¬ (ì²« ì‹¤í–‰ ì‹œ)
cd android
./gradlew clean
cd ..

# ì•± ì‹¤í–‰
npx react-native run-android
```

### 4. Edge Function ë°°í¬
```bash
cd supabase
npx supabase functions deploy analyze-food-image --project-ref wrgeaabfsbjdgtjcwevv

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
npx supabase secrets set GEMINI_API_KEY=your_key --project-ref wrgeaabfsbjdgtjcwevv
npx supabase secrets set GEMINI_MODEL=gemini-1.5-flash --project-ref wrgeaabfsbjdgtjcwevv
```

---

## ğŸ“Š ë°ì´í„° êµ¬ì¡°

### UserProfile
```typescript
{
  id: string;
  name: string;
  email?: string;
  goal: 'diet' | 'bulk' | 'maintain' | 'low_sodium';
  dietType: 'general' | 'vegan' | 'vegetarian' | 'pescatarian' | 'keto' | 'low_carb';
  allergens: string[];        // ['ë•…ì½©', 'ê°‘ê°ë¥˜', ...]
  disliked: string[];          // ['ì˜¤ì´', 'ê³ ìˆ˜', ...]
  onboardingCompleted: boolean;
  createdAt: string;
  updatedAt: string;
}
```

### FoodAnalysis
```typescript
{
  dishName: string;
  description: string;
  categories: string[];
  confidence: number;
  macros: {
    calories?: number;
    carbs_g?: number;
    protein_g?: number;
    fat_g?: number;
    sodium_mg?: number;
    // ...
  };
  userAnalysis?: {
    grade: 'very_good' | 'good' | 'neutral' | 'bad' | 'very_bad';
    score: number;              // 0-100
    reasons: string[];          // ë“±ê¸‰ ì´ìœ 
    warnings: string[];         // ì•Œë ˆë¥´ê¸°/ê¸°í”¼ ê²½ê³ 
    alternatives: string[];     // ëŒ€ì²´ ìŒì‹ ì¶”ì²œ
    tips: string[];             // ì„­ì·¨ íŒ
  };
}
```

---

## ğŸ¨ ì‹ í˜¸ë“± ì‹œìŠ¤í…œ ìƒì„¸

### ì ìˆ˜ ê³„ì‚° ë¡œì§
- **ê¸°ë³¸ ì ìˆ˜**: 60ì  (ë³´í†µ)
- **ì•Œë ˆë¥´ê¸° ë°œê²¬**: -40ì  (ë§¤ìš° ìœ„í—˜)
- **ê¸°í”¼ ì‹ì¬ë£Œ**: -15ì 
- **ë¹„ê±´ ìœ„ë°˜**: -30ì 
- **ëª©í‘œ ë¶€í•©**: +15~20ì 
- **ì˜ì–‘ì†Œ ì´ˆê³¼/ë¶€ì¡±**: Â±10~15ì 

### ë“±ê¸‰ ê¸°ì¤€
| ì ìˆ˜ | ë“±ê¸‰ | ìƒ‰ìƒ | ì„¤ëª… |
|------|------|------|------|
| 80+ | ë§¤ìš° ì¢‹ìŒ | ì´ˆë¡ (#22C55E) | ëª©í‘œì— ì™„ë²½ ë¶€í•© |
| 65-79 | ì¢‹ìŒ | ì—°ë‘ (#84CC16) | ê¶Œì¥í•¨ |
| 45-64 | ë³´í†µ | ë…¸ë‘ (#EAB308) | ì–‘ ì¡°ì ˆ í•„ìš” |
| 25-44 | ë‚˜ì¨ | ì£¼í™© (#F97316) | ê¶Œì¥í•˜ì§€ ì•ŠìŒ |
| 0-24 | ë§¤ìš° ë‚˜ì¨ | ë¹¨ê°• (#EF4444) | í”¼í•´ì•¼ í•¨ |

---

## ğŸ› ì•Œë ¤ì§„ ì´ìŠˆ ë° í•´ê²°

### 1. íˆìŠ¤í† ë¦¬ì—ì„œ ì´ë¯¸ì§€ê°€ ì•ˆ ë³´ì´ëŠ” ë¬¸ì œ
**ì›ì¸**: Supabase Storage ì„¤ì • ë˜ëŠ” ì—…ë¡œë“œ ì‹¤íŒ¨
**í•´ê²°**: 
```powershell
# ì§„ë‹¨ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
.\scripts\diagnose-backend.ps1

# ìì„¸í•œ í•´ê²° ë°©ë²•ì€ TROUBLESHOOTING.md ì°¸ì¡°
```

**ë¹ ë¥¸ ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [ ] Supabase Storageì— `food-images` ë²„í‚· ìƒì„± (Public)
- [ ] Storage RLS ì •ì±… 3ê°œ ì¶”ê°€ (INSERT, SELECT, DELETE)
- [ ] Edge Function ë¡œê·¸ì—ì„œ ì—ëŸ¬ í™•ì¸

### 2. Gemini API ì˜¤ë¥˜
**ì›ì¸**: Edge Functionì— GEMINI_API_KEYê°€ ì„¤ì •ë˜ì§€ ì•ŠìŒ
**í•´ê²°**:
```powershell
# ìë™ ì„¤ì • ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
.\scripts\update-gemini-key.ps1

# ë˜ëŠ” ìˆ˜ë™ ì„¤ì •:
# Supabase Dashboard â†’ Edge Functions â†’ analyze-food-image
# â†’ Secrets íƒ­ â†’ GEMINI_API_KEY ì¶”ê°€
```

### 3. `androidx.transition.AutoTransition` ì—ëŸ¬
**í•´ê²°**: `android/app/build.gradle`ì— ì˜ì¡´ì„± ì¶”ê°€
```gradle
implementation 'androidx.transition:transition:1.4.1'
implementation 'androidx.appcompat:appcompat:1.6.1'
```

### 4. ê°¤ëŸ¬ë¦¬ ê¶Œí•œ (Android 13+)
**í•´ê²°**: `READ_MEDIA_IMAGES` + `READ_EXTERNAL_STORAGE` (API ë ˆë²¨ ë¶„ê¸°)

### 5. Metro ìºì‹œ ë¬¸ì œ
**í•´ê²°**: 
```bash
npx react-native start --reset-cache
```

### ğŸ“– ë” ìì„¸í•œ ë¬¸ì œ í•´ê²°
â†’ **[TROUBLESHOOTING.md](./TROUBLESHOOTING.md)** ì°¸ì¡°

---

## ğŸ“ í–¥í›„ ê°œë°œ ê³„íš

### Phase 1 (í˜„ì¬ ì™„ë£Œ)
- âœ… ì˜¨ë³´ë”© í”Œë¡œìš°
- âœ… í™ˆ ëŒ€ì‹œë³´ë“œ
- âœ… ìŒì‹ ë¶„ì„ (ê¸°ë³¸ + ì‚¬ìš©ì ë§ì¶¤)
- âœ… ì‹ë‹¨ ê¸°ë¡
- âœ… ë§ˆì´í˜ì´ì§€

### Phase 2 (ë‹¤ìŒ ë‹¨ê³„)
- [ ] Supabase Auth í†µí•© (íšŒì›ê°€ì…/ë¡œê·¸ì¸)
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ (food_logs, body_logs í…Œì´ë¸”)
- [ ] í”„ë¡œí•„ ìˆ˜ì • ê¸°ëŠ¥
- [ ] ì¼ë³„/ì£¼ë³„ í†µê³„ ì°¨íŠ¸

### Phase 3 (ê³ ê¸‰ ê¸°ëŠ¥)
- [ ] AI ì½”ì¹­ ë©”ì‹œì§€ (GPT ì—°ë™)
- [ ] ì‹ë‹¨ ì¶”ì²œ ê¸°ëŠ¥
- [ ] ì²´ì¤‘/ê³¨ê²©ê·¼ëŸ‰ ê¸°ë¡ ë° ê·¸ë˜í”„
- [ ] í‘¸ì‹œ ì•Œë¦¼ (ì‹ì‚¬ ì‹œê°„ ë¦¬ë§ˆì¸ë”)
- [ ] ì†Œì…œ ê³µìœ  ê¸°ëŠ¥

### Phase 4 (í”„ë¦¬ë¯¸ì—„)
- [ ] ì •ë°€ ì˜ì–‘ì†Œ ë¶„ì„
- [ ] ê°œì¸ ë§ì¶¤ ì‹ë‹¨í‘œ ìƒì„±
- [ ] ì˜ì–‘ì‚¬ ìƒë‹´ ì—°ê²°
- [ ] êµ¬ë… ëª¨ë¸ ë„ì…

---

## ğŸ¤ ê¸°ì—¬ ë°©ë²•

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

---

## ğŸ“„ ë¼ì´ì„ ìŠ¤

MIT License

---

## ğŸ‘¨â€ğŸ’» ê°œë°œì

**SeongHyeon3395**
- GitHub: [@SeongHyeon3395](https://github.com/SeongHyeon3395)

---

## ğŸ™ ê°ì‚¬ì˜ ë§

- **Google Gemini**: Vision AI ì œê³µ
- **Supabase**: ë°±ì—”ë“œ ì¸í”„ë¼
- **React Native ì»¤ë®¤ë‹ˆí‹°**: ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬

---

**Built with â¤ï¸ for healthier eating habits**
